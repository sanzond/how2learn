# my-rule

è¿™æ˜¯ä¸€ä¸ªè§„åˆ™æ–‡ä»¶ï¼Œç”¨äºå¸®åŠ© AI ç†è§£æ‚¨çš„ä»£ç åº“å’Œéµå¾ªé¡¹ç›®çº¦å®šã€‚

## 1. æ–‡ä»¶ç»“æ„å’Œå‘½åçº¦å®š

### æ–‡ä»¶å‘½å
- è§†å›¾æ–‡ä»¶å‘½åæ ¼å¼ï¼š`{model_name}_views.xml`
- èœå•æ–‡ä»¶å‘½åæ ¼å¼ï¼š`{module_name}_menu_views.xml`
- é…ç½®æ–‡ä»¶å‘½åæ ¼å¼ï¼š`res_config_settings_views.xml`
- èµ„æºæ–‡ä»¶å‘½åæ ¼å¼ï¼š`assets.xml`

### æ–‡ä»¶ç»“æ„
```xml
<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- è§†å›¾è®°å½•æŒ‰ä»¥ä¸‹é¡ºåºç»„ç»‡ -->
    <!-- 1. æœç´¢è§†å›¾ (search) -->
    <!-- 2. åˆ—è¡¨è§†å›¾ (tree) -->
    <!-- 3. è¡¨å•è§†å›¾ (form) -->
    <!-- 4. çœ‹æ¿è§†å›¾ (kanban) -->
    <!-- 5. æ—¥å†è§†å›¾ (calendar) -->
    <!-- 6. é€è§†è¡¨è§†å›¾ (pivot) -->
    <!-- 7. å›¾è¡¨è§†å›¾ (graph) -->
    <!-- 8. æ´»åŠ¨è§†å›¾ (activity) -->
    <!-- 9. åŠ¨ä½œè®°å½• (ir.actions.act_window) -->
    <!-- 10. èœå•é¡¹ (ir.ui.menu) -->
</odoo>
```

## 2. è§†å›¾è®°å½•çº¦å®š

### è®°å½•IDå‘½å
- è¡¨å•è§†å›¾ï¼š`{model_name}_view_form` æˆ– `{model_name}_form`
- åˆ—è¡¨è§†å›¾ï¼š`{model_name}_view_tree` æˆ– `{model_name}_tree`
- æœç´¢è§†å›¾ï¼š`{model_name}_view_search` æˆ– `{model_name}_search`
- çœ‹æ¿è§†å›¾ï¼š`{model_name}_view_kanban` æˆ– `{model_name}_kanban`
- æ—¥å†è§†å›¾ï¼š`{model_name}_view_calendar` æˆ– `{model_name}_calendar`
- é€è§†è¡¨ï¼š`{model_name}_view_pivot` æˆ– `{model_name}_pivot`
- å›¾è¡¨è§†å›¾ï¼š`{model_name}_view_graph` æˆ– `{model_name}_graph`

### è§†å›¾åç§°
- æ ¼å¼ï¼š`{model.name}.{view_type}` æˆ–æè¿°æ€§åç§°
- ç»§æ‰¿è§†å›¾ï¼š`{model.name}.{view_type}.inherit.{module_name}`

## 3. è¡¨å•è§†å›¾ç»“æ„

### æ ‡å‡†è¡¨å•å¸ƒå±€
```xml
<form class="custom_class" js_class="js_controller_class">
    <header>
        <!-- ä¸šåŠ¡æŒ‰é’® -->
        <button name="action_confirm" string="Confirm" type="object" 
                class="btn-primary" data-hotkey="c" 
                attrs="{'invisible': [('state', '!=', 'draft')]}"/>
        <button name="action_send" string="Send by Email" type="object" 
                class="btn-primary" data-hotkey="g" 
                context="{'validate_analytic': True}"/>
        
        <!-- çŠ¶æ€æ  -->
        <field name="state" widget="statusbar" 
               statusbar_visible="draft,sent,confirmed,done"/>
    </header>
    
    <!-- è­¦å‘Šæ¨ªå¹… -->
    <div class="alert alert-warning mb-0" role="alert"
         attrs="{'invisible': [('warning_message', '=', '')]}">
        <field name="warning_message"/>
    </div>
    
    <sheet>
        <!-- éšè—å­—æ®µ -->
        <field name="active" invisible="1"/>
        <field name="currency_id" invisible="1"/>
        
        <!-- æŒ‰é’®æ¡† -->
        <div class="oe_button_box" name="button_box">
            <button name="action_view_related" type="object" 
                    class="oe_stat_button" icon="fa-pencil-square-o"
                    attrs="{'invisible': [('related_count', '=', 0)]}">
                <field name="related_count" widget="statinfo" string="Related"/>
            </button>
            
            <button name="action_preview" type="object"
                    class="oe_stat_button" icon="fa-globe">
                <div class="o_field_widget o_stat_info">
                    <span class="o_stat_text">Customer</span>
                    <span class="o_stat_text">Preview</span>
                </div>
            </button>
        </div>
        
        <!-- Web Ribbon -->
        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" 
                attrs="{'invisible': [('active', '=', True)]}"/>
        
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <div class="oe_title">
            <label for="name"/>
            <h1><field name="name" placeholder="Enter name..." readonly="1"/></h1>
        </div>
        
        <!-- å­—æ®µåˆ†ç»„ -->
        <group name="main_group">
            <group name="left_group">
                <field name="partner_id" widget="res_partner_many2one"
                       context="{'res_partner_search_mode': 'customer', 'show_address': 1}"
                       options='{"always_reload": True}'/>
                <field name="date_field"/>
                <field name="user_id"/>
            </group>
            <group name="right_group">
                <field name="amount_total" widget="monetary"/>
                <field name="state_info" readonly="1"/>
                <field name="priority" widget="priority"/>
            </group>
        </group>
        
        <!-- ç¬”è®°æœ¬é¡µç­¾ -->
        <notebook>
            <page string="Main Info" name="main_info">
                <field name="line_ids" widget="section_and_note_one2many"
                       mode="tree,kanban"
                       attrs="{'readonly': [('state', 'in', ('done','cancel'))]}">
                    <tree string="Lines" editable="bottom">
                        <field name="sequence" widget="handle"/>
                        <field name="product_id"/>
                        <field name="quantity"/>
                        <field name="price_unit" widget="monetary"/>
                        <field name="price_subtotal" widget="monetary"/>
                    </tree>
                </field>
            </page>
            <page string="Other Info" name="other_info" 
                  attrs="{'invisible': [('show_other_info', '=', False)]}">
                <group>
                    <field name="notes" widget="html"/>
                    <field name="internal_reference"/>
                </group>
            </page>
        </notebook>
    </sheet>
    
    <!-- æ¶ˆæ¯å’Œå…³æ³¨è€… -->
    <div class="oe_chatter">
        <field name="message_follower_ids"/>
        <field name="activity_ids"/>
        <field name="message_ids"/>
    </div>
</form>
```

### ä¸šåŠ¡æ¨¡å—ç‰¹æœ‰è¡¨å•ç»“æ„

#### é”€å”®è®¢å•è¡¨å•ç‰¹è‰²
```xml
<form class="o_sale_order" js_class="sale_form">
    <header>
        <!-- å‘ç¥¨æŒ‰é’® -->
        <button name="%(action_view_sale_advance_payment_inv)d" 
                string="Create Invoice" type="action" 
                class="btn-primary" data-hotkey="q"
                attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"/>
        
        <!-- ç¡®è®¤æŒ‰é’® -->
        <button name="action_confirm" string="Confirm" 
                class="btn-primary" type="object" data-hotkey="v"
                context="{'validate_analytic': True}"
                attrs="{'invisible': [('state', 'not in', ['sent'])]}"/>
    </header>
    <!-- å…¶ä½™ç»“æ„åŒæ ‡å‡†è¡¨å• -->
</form>
```

## 4. åˆ—è¡¨è§†å›¾çº¦å®š

### åŸºæœ¬ç»“æ„
```xml
<tree string="Records" 
      decoration-info="state == 'draft'" 
      decoration-success="state == 'confirmed'"
      decoration-warning="state == 'sent'"
      decoration-danger="state == 'cancelled'"
      decoration-muted="active == False"
      multi_edit="1" editable="top" create="true" delete="true">
    
    <field name="sequence" widget="handle"/>
    <field name="name"/>
    <field name="partner_id"/>
    <field name="date_field" widget="date"/>
    <field name="amount_total" sum="Total" widget="monetary"/>
    <field name="currency_id" invisible="1"/>
    <field name="state" widget="badge"/>
    <field name="priority" widget="priority"/>
    <field name="active" invisible="1"/>
</tree>
```

### è£…é¥°å™¨çº¦å®š
- `decoration-info`ï¼šè“è‰²é«˜äº®ï¼ˆè‰ç¨¿çŠ¶æ€ï¼‰
- `decoration-success`ï¼šç»¿è‰²é«˜äº®ï¼ˆæˆåŠŸçŠ¶æ€ï¼‰
- `decoration-warning`ï¼šæ©™è‰²é«˜äº®ï¼ˆè­¦å‘ŠçŠ¶æ€ï¼‰
- `decoration-danger`ï¼šçº¢è‰²é«˜äº®ï¼ˆé”™è¯¯çŠ¶æ€ï¼‰
- `decoration-muted`ï¼šç°è‰²æ˜¾ç¤ºï¼ˆåœç”¨çŠ¶æ€ï¼‰

### ä¸šåŠ¡ç‰¹æœ‰è£…é¥°
```xml
<!-- é”€å”®è®¢å•ç‰¹æœ‰è£…é¥° -->
<tree decoration-info="state == 'draft'" 
      decoration-success="state == 'sale'"
      decoration-warning="state == 'sent'"
      decoration-danger="invoice_status == 'to invoice'"
      decoration-muted="state == 'cancel'">
</tree>
```

## 5. çœ‹æ¿è§†å›¾çº¦å®š

### æ ‡å‡†çœ‹æ¿å¸ƒå±€
```xml
<kanban class="o_kanban_mobile" sample="1" quick_create="false">
    <field name="name"/>
    <field name="partner_id"/>
    <field name="amount_total"/>
    <field name="date_field"/>
    <field name="state"/>
    <field name="currency_id"/>
    <field name="activity_state"/>
    <field name="color"/>
    
    <!-- è¿›åº¦æ¡ -->
    <progressbar field="activity_state"
        colors='{"planned": "success", "today": "warning", "overdue": "danger"}'/>
    
    <templates>
        <t t-name="kanban-box">
            <div t-attf-class="oe_kanban_card oe_kanban_global_click #{kanban_color(record.color.raw_value)}">
                <div class="o_kanban_record_top mb16">
                    <div class="o_kanban_record_headings mt4">
                        <strong class="o_kanban_record_title">
                            <span t-out="record.partner_id.value"/>
                        </strong>
                    </div>
                    <span class="float-end badge badge-pill">
                        <field name="amount_total" widget="monetary"/>
                    </span>
                </div>
                <div class="o_kanban_record_body">
                    <field name="name"/>
                    <div class="o_kanban_record_subtitle">
                        <field name="date_field"/>
                    </div>
                </div>
                <div class="o_kanban_record_bottom">
                    <div class="oe_kanban_bottom_left">
                        <field name="activity_ids" widget="kanban_activity"/>
                    </div>
                    <div class="oe_kanban_bottom_right">
                        <field name="state" widget="label_selection"
                               options="{'classes': {'draft': 'secondary', 'sent': 'success'}}"/>
                    </div>
                </div>
            </div>
        </t>
    </templates>
</kanban>
```

## 6. æœç´¢è§†å›¾ç»“æ„

### ç»¼åˆæœç´¢è§†å›¾
```xml
<search string="Search Records">
    <!-- æœç´¢å­—æ®µ -->
    <field name="name" string="Name" filter_domain="[('name','ilike',self)]"/>
    <field name="partner_id" operator="child_of"/>
    <field name="user_id"/>
    <field name="line_ids" string="Product" 
           filter_domain="[('line_ids.product_id','ilike',self)]"/>
    
    <!-- çŠ¶æ€è¿‡æ»¤å™¨ -->
    <filter name="draft" string="Draft" 
            domain="[('state','=','draft')]"/>
    <filter name="confirmed" string="Confirmed" 
            domain="[('state','=','confirmed')]"/>
    <filter name="done" string="Done" 
            domain="[('state','=','done')]"/>
    
    <!-- ä¸šåŠ¡è¿‡æ»¤å™¨ -->
    <separator/>
    <filter name="to_process" string="To Process" 
            domain="[('invoice_status','=','to_invoice')]"/>
    <filter name="processed" string="Processed" 
            domain="[('invoice_status','=','invoiced')]"/>
    
    <!-- æ—¥æœŸè¿‡æ»¤å™¨ -->
    <separator/>
    <filter name="today" string="Today" 
            domain="[('date_field','>=',datetime.datetime.combine(context_today(),datetime.time(0,0,0)))]"/>
    <filter name="this_month" string="This Month" 
            date="date_field" default_period="this_month"/>
    
    <!-- æˆ‘çš„è®°å½• -->
    <separator/>
    <filter name="my_records" string="My Records" 
            domain="[('user_id','=',uid)]"/>
    <filter name="unassigned" string="Unassigned" 
            domain="[('user_id','=',False)]"/>
    
    <!-- æ´»åŠ¨è¿‡æ»¤å™¨ -->
    <separator/>
    <filter name="activities_overdue" string="Late Activities"
            domain="[('activity_ids.date_deadline', '<', context_today().strftime('%Y-%m-%d'))]"
            help="Show records that have overdue activities"/>
    <filter name="activities_today" string="Today Activities"
            domain="[('activity_ids.date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"/>
    
    <!-- åˆ†ç»„ -->
    <group expand="0" string="Group By">
        <filter name="group_user" string="Assigned to" 
                context="{'group_by':'user_id'}"/>
        <filter name="group_partner" string="Customer" 
                context="{'group_by':'partner_id'}"/>
        <filter name="group_state" string="Status" 
                context="{'group_by':'state'}"/>
        <filter name="group_date" string="Date" 
                context="{'group_by':'date_field:month'}"/>
    </group>
</search>
```

## 7. å­—æ®µå’Œå°éƒ¨ä»¶çº¦å®š

### æ ‡å‡†å°éƒ¨ä»¶
- `widget="handle"`ï¼šæ‹–æ‹½æ’åº
- `widget="statusbar"`ï¼šçŠ¶æ€æ 
- `widget="badge"`ï¼šå¾½ç« æ˜¾ç¤º
- `widget="priority"`ï¼šä¼˜å…ˆçº§æ˜Ÿçº§
- `widget="boolean_toggle"`ï¼šå¼€å…³æŒ‰é’®
- `widget="monetary"`ï¼šè´§å¸å­—æ®µ
- `widget="percentage"`ï¼šç™¾åˆ†æ¯”
- `widget="many2many_tags"`ï¼šæ ‡ç­¾æ˜¾ç¤º
- `widget="selection_badge"`ï¼šé€‰æ‹©å­—æ®µå¾½ç« 
- `widget="ace"`ï¼šä»£ç ç¼–è¾‘å™¨
- `widget="html"`ï¼šHTMLç¼–è¾‘å™¨
- `widget="image"`ï¼šå›¾ç‰‡å­—æ®µ
- `widget="kanban_activity"`ï¼šçœ‹æ¿æ´»åŠ¨

### ä¸šåŠ¡ç‰¹æœ‰å°éƒ¨ä»¶
```xml
<!-- é”€å”®ç‰¹æœ‰ -->
<field name="order_line" widget="section_and_note_one2many"/>
<field name="partner_id" widget="res_partner_many2one"
       context="{'res_partner_search_mode': 'customer'}"/>

<!-- ä¼šè®¡ç‰¹æœ‰ -->
<field name="account_id" widget="account_tree"/>
<field name="tax_ids" widget="many2many_tags"/>

<!-- åº“å­˜ç‰¹æœ‰ -->
<field name="location_id" widget="stock_location"/>
<field name="lot_id" widget="stock_lot"/>
```

### å­—æ®µå±æ€§
- `invisible="1"`ï¼šéšè—å­—æ®µä½†åŠ è½½æ•°æ®
- `readonly="1"`ï¼šåªè¯»å­—æ®µ
- `required="1"`ï¼šå¿…å¡«å­—æ®µ
- `nolabel="1"`ï¼šä¸æ˜¾ç¤ºæ ‡ç­¾
- `password="True"`ï¼šå¯†ç å­—æ®µ
- `placeholder="Enter value"`ï¼šå ä½ç¬¦æ–‡æœ¬

## 8. æ¡ä»¶æ˜¾ç¤ºçº¦å®š

### attrsè¯­æ³•ï¼ˆæ¨èç”¨äºå¤æ‚æ¡ä»¶ï¼‰
```xml
<!-- å•æ¡ä»¶ -->
attrs="{'invisible': [('field_name', '=', 'value')]}"
attrs="{'readonly': [('state', '!=', 'draft')]}"
attrs="{'required': [('type', '=', 'customer')]}"

<!-- å¤šæ¡ä»¶AND -->
attrs="{'invisible': [('field1', '=', 'value1'), ('field2', '!=', 'value2')]}"

<!-- å¤šæ¡ä»¶OR -->
attrs="{'invisible': ['|', ('field1', '=', 'value1'), ('field2', '=', 'value2')]}"

<!-- å¤æ‚æ¡ä»¶ -->
attrs="{'invisible': ['|', ('active', '=', False), '&', ('state', '=', 'done'), ('user_id', '=', uid)]}"

<!-- å¤šå±æ€§æ¡ä»¶ -->
attrs="{'invisible': [('state', '=', 'draft')], 'readonly': [('confirmed', '=', True)]}"
```

### Odoo 16+ ç®€åŒ–è¯­æ³•ï¼ˆç”¨äºç®€å•æ¡ä»¶ï¼‰
```xml
invisible="field_name == 'value'"
readonly="state != 'draft'"
required="type == 'customer'"
```

### ä¸šåŠ¡æ¡ä»¶ç¤ºä¾‹
```xml
<!-- é”€å”®ä¸šåŠ¡æ¡ä»¶ -->
attrs="{'invisible': [('invoice_status', '!=', 'to_invoice')]}"
attrs="{'readonly': [('state', 'in', ('done','cancel'))]}"

<!-- æƒé™ç›¸å…³æ¡ä»¶ -->
groups="sales_team.group_sale_manager"
attrs="{'invisible': [('user_has_group', '=', False)]}"
```

## 9. æŒ‰é’®çº¦å®š

### æŒ‰é’®ç±»å‹å’Œæ ·å¼
```xml
<!-- ä¸»è¦æ“ä½œæŒ‰é’® -->
<button name="action_confirm" string="Confirm" type="object" 
        class="btn-primary" data-hotkey="c"
        attrs="{'invisible': [('state', '!=', 'draft')]}"/>

<!-- æ¬¡è¦æ“ä½œæŒ‰é’® -->
<button name="action_reset" string="Reset to Draft" type="object" 
        class="btn-secondary" data-hotkey="r"/>

<!-- é“¾æ¥æ ·å¼æŒ‰é’® -->
<button name="action_view_details" string="View Details" type="object" 
        class="oe_link"/>

<!-- ç»Ÿè®¡æŒ‰é’® -->
<button class="oe_stat_button" name="action_view_related"
        type="object" icon="fa-signal">
    <div class="o_stat_info">
        <field name="related_count" class="o_stat_value"/>
        <span class="o_stat_text">Related</span>
    </div>
</button>

<!-- åŠ¨ä½œæŒ‰é’® -->
<button name="%(action_wizard)d" string="Open Wizard" type="action" 
        class="btn-primary"/>
```

### çƒ­é”®çº¦å®š
```xml
<button data-hotkey="c">Confirm</button>    <!-- c = confirm -->
<button data-hotkey="v">Validate</button>   <!-- v = validate -->
<button data-hotkey="s">Save</button>       <!-- s = save -->
<button data-hotkey="d">Discard</button>    <!-- d = discard -->
<button data-hotkey="q">Quick</button>      <!-- q = quick -->
<button data-hotkey="g">Generate</button>   <!-- g = generate -->
<button data-hotkey="x">Cancel</button>     <!-- x = cancel -->
```

## 10. æ—¥å†å’Œæ—¶é—´è§†å›¾

### æ—¥å†è§†å›¾
```xml
<calendar string="Calendar View" 
          date_start="date_start" 
          date_stop="date_end"
          color="user_id" 
          hide_time="false" 
          event_limit="5" 
          quick_add="true"
          all_day="all_day_field">
    <field name="currency_id" invisible="1"/>
    <field name="partner_id" avatar_field="avatar_128"/>
    <field name="amount_total" widget="monetary"/>
    <field name="state" filters="1" invisible="1"/>
</calendar>
```

### æ´»åŠ¨è§†å›¾
```xml
<activity string="Activities">
    <templates>
        <div t-name="activity-box">
            <div>
                <field name="name" display="full"/>
                <field name="partner_id" muted="1" display="full"/>
            </div>
        </div>
    </templates>
</activity>
```

## 11. å›¾è¡¨å’Œé€è§†è¡¨

### å›¾è¡¨è§†å›¾
```xml
<graph string="Analysis" sample="1" type="bar">
    <field name="partner_id"/>
    <field name="amount_total" type="measure"/>
    <field name="date_field" interval="month"/>
</graph>
```

### é€è§†è¡¨è§†å›¾
```xml
<pivot string="Pivot Analysis" sample="1" display_quantity="true">
    <field name="date_field" type="row" interval="month"/>
    <field name="partner_id" type="row"/>
    <field name="user_id" type="col"/>
    <field name="amount_total" type="measure"/>
    <field name="quantity" type="measure"/>
</pivot>
```

## 12. åŠ¨ä½œè®°å½•çº¦å®š

### æ ‡å‡†åŠ¨ä½œè®°å½•
```xml
<record id="action_model_name" model="ir.actions.act_window">
    <field name="name">Display Name</field>
    <field name="res_model">model.name</field>
    <field name="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
    <field name="domain">[('active', '=', True)]</field>
    <field name="context">{
        'default_field': 'value',
        'search_default_filter': 1,
        'search_default_group_by': 1
    }</field>
    <field name="view_ids" eval="[(5, 0, 0),
                                  (0, 0, {'view_mode': 'tree', 'view_id': ref('view_tree_id')}),
                                  (0, 0, {'view_mode': 'form', 'view_id': ref('view_form_id')})]"/>
    <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
            Create your first record
        </p>
        <p>
            Click the create button to start.
        </p>
    </field>
</record>
```

### ä¸šåŠ¡ç‰¹æœ‰åŠ¨ä½œ
```xml
<!-- é”€å”®è®¢å•åŠ¨ä½œ -->
<record id="action_orders" model="ir.actions.act_window">
    <field name="name">Sales Orders</field>
    <field name="res_model">sale.order</field>
    <field name="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
    <field name="context">{
        'search_default_my_quotation': 1,
        'search_default_order_month': 1,
        'default_state': 'draft'
    }</field>
    <field name="domain">[('state', 'not in', ('draft', 'sent'))]</field>
</record>
```

## 13. èœå•ç»“æ„çº¦å®š

### æ ‡å‡†èœå•å±‚çº§
```xml
<menuitem id="main_menu_root" name="Main Menu" 
          web_icon="module_name,static/description/icon.svg"
          sequence="30">
    
    <!-- ä¸»è¦åŠŸèƒ½èœå•ç»„ -->
    <menuitem id="menu_main_operations" name="Operations" sequence="10">
        <menuitem id="menu_records" 
                  action="action_records"
                  groups="base.group_user" sequence="10"/>
        <menuitem id="menu_reports" name="Reports"
                  action="action_reports" sequence="20"/>
    </menuitem>
    
    <!-- é…ç½®èœå•ç»„ -->
    <menuitem id="menu_configuration" name="Configuration"
              groups="base.group_system" sequence="90">
        <menuitem id="menu_settings" 
                  action="action_settings" sequence="10"/>
    </menuitem>
</menuitem>
```

### ä¸šåŠ¡æ¨¡å—èœå•ç¤ºä¾‹
```xml
<!-- é”€å”®èœå• -->
<menuitem id="sale_menu_root" name="Sales" 
          web_icon="sale_management,static/description/icon.svg"
          sequence="30">
    <menuitem id="sale_order_menu" name="Orders" sequence="10">
        <menuitem id="menu_sale_quotations" 
                  action="action_quotations_with_onboarding"
                  groups="sales_team.group_sale_salesman" sequence="10"/>
        <menuitem id="menu_sale_order" name="Orders"
                  action="action_orders"
                  groups="sales_team.group_sale_salesman" sequence="20"/>
    </menuitem>
</menuitem>
```

## 14. ç»§æ‰¿è§†å›¾çº¦å®š

### XPathç»§æ‰¿è¡¨è¾¾å¼
```xml
<record id="view_inherit_id" model="ir.ui.view">
    <field name="name">Inherit View Name</field>
    <field name="model">model.name</field>
    <field name="inherit_id" ref="module.original_view_id"/>
    <field name="arch" type="xml">
        <!-- åœ¨å­—æ®µåæ·»åŠ  -->
        <field name="existing_field" position="after">
            <field name="new_field"/>
        </field>
        
        <!-- åœ¨ç»„å†…æ·»åŠ  -->
        <group name="existing_group" position="inside">
            <field name="new_field"/>
        </group>
        
        <!-- æ›¿æ¢å­—æ®µ -->
        <field name="existing_field" position="replace">
            <field name="existing_field" widget="new_widget"/>
        </field>
        
        <!-- ä¿®æ”¹å±æ€§ -->
        <field name="existing_field" position="attributes">
            <attribute name="invisible">1</attribute>
            <attribute name="required">0</attribute>
        </field>
        
        <!-- ä½¿ç”¨XPathè¡¨è¾¾å¼ -->
        <xpath expr="//field[@name='field_name']" position="after">
            <field name="new_field"/>
        </xpath>
        
        <!-- å¤æ‚XPath -->
        <xpath expr="//notebook/page[@name='page_name']" position="inside">
            <group string="New Group">
                <field name="new_field"/>
            </group>
        </xpath>
    </field>
</record>
```

## 15. é…ç½®è®¾ç½®è§†å›¾

### è®¾ç½®é¡µé¢ç»“æ„
```xml
<div class="app_settings_block o_not_app"
     string="Module Settings" data-string="Module Settings" 
     data-key="module_name"
     groups="base.group_system">
    
    <h2>Main Configuration</h2>
    <div class="row mt16 o_settings_container" name="main_setting_container">
        <div class="col-12 col-lg-6 o_setting_box" id="feature_option">
            <div class="o_setting_left_pane">
                <field name="enable_feature"/>
            </div>
            <div class="o_setting_right_pane">
                <label for="enable_feature"/>
                <a href="https://www.odoo.com/documentation/16.0/..." 
                   title="Documentation" class="o_doc_link" target="_blank"/>
                <div class="text-muted">
                    Enable advanced features for better functionality
                </div>
                <div class="content-group" 
                     attrs="{'invisible': [('enable_feature','=',False)]}">
                    <div class="mt8">
                        <button name="%(action_configuration)d" 
                                icon="fa-arrow-right" type="action" 
                                string="Configure" class="btn-link"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
```

## 16. å“åº”å¼è®¾è®¡çº¦å®š

### Bootstrapç±»ä½¿ç”¨
```xml
<!-- å“åº”å¼åˆ—å¸ƒå±€ -->
<div class="row">
    <div class="col-lg-6 col-md-12">
        <field name="field1"/>
    </div>
    <div class="col-lg-6 col-md-12">
        <field name="field2"/>
    </div>
</div>

<!-- è®¾ç½®é¡µé¢å“åº”å¼ -->
<div class="o_setting_box">
    <div class="o_setting_left_pane">
        <field name="boolean_field"/>
    </div>
    <div class="o_setting_right_pane">
        <label for="boolean_field"/>
        <div class="text-muted">Description</div>
    </div>
</div>
```

## 17. æƒé™å’Œå®‰å…¨çº¦å®š

### ç»„æƒé™
```xml
<!-- è§†å›¾çº§æƒé™ -->
<record id="view_id" model="ir.ui.view" groups="base.group_user"/>

<!-- å­—æ®µçº§æƒé™ -->
<field name="sensitive_field" groups="base.group_system"/>

<!-- æŒ‰é’®æƒé™ -->
<button name="action_admin" groups="base.group_system"/>

<!-- èœå•æƒé™ -->
<menuitem groups="sales_team.group_sale_manager"/>
```

### å¸¸ç”¨æƒé™ç»„
- `base.group_user`ï¼šå†…éƒ¨ç”¨æˆ·
- `base.group_system`ï¼šç³»ç»Ÿç®¡ç†å‘˜
- `base.group_portal`ï¼šé—¨æˆ·ç”¨æˆ·
- `base.group_public`ï¼šå…¬å…±ç”¨æˆ·
- `sales_team.group_sale_salesman`ï¼šé”€å”®å‘˜
- `sales_team.group_sale_manager`ï¼šé”€å”®ç»ç†
- `account.group_account_manager`ï¼šä¼šè®¡ç»ç†

## 18. ä¸Šä¸‹æ–‡çº¦å®š

### å¸¸ç”¨ä¸Šä¸‹æ–‡å˜é‡
```xml
<!-- é»˜è®¤å€¼è®¾ç½® -->
context="{'default_field': 'value', 'default_state': 'draft'}"

<!-- æœç´¢é»˜è®¤è¿‡æ»¤å™¨ -->
context="{'search_default_filter_name': 1, 'search_default_group_by': 1}"

<!-- ä¸šåŠ¡ä¸Šä¸‹æ–‡ -->
context="{'res_partner_search_mode': 'customer', 'show_address': 1, 'show_vat': True}"
context="{'partner_id': partner_id, 'quantity': quantity, 'pricelist': pricelist_id}"

<!-- éªŒè¯ä¸Šä¸‹æ–‡ -->
context="{'validate_analytic': True, 'check_permissions': True}"

<!-- è§†å›¾æ¨¡å¼é™åˆ¶ -->
context="{'form_view_ref': 'module.view_form_id', 'tree_view_ref': 'module.view_tree_id'}"
```

## 19. CSSç±»å’Œæ ·å¼çº¦å®š

### è¡¨å•æ ·å¼ç±»
- `o_sale_order`ï¼šé”€å”®è®¢å•è¡¨å•
- `o_account_move`ï¼šä¼šè®¡å‡­è¯è¡¨å•
- `o_kanban_mobile`ï¼šç§»åŠ¨ç«¯çœ‹æ¿
- `o_stat_info`ï¼šç»Ÿè®¡ä¿¡æ¯
- `o_setting_box`ï¼šè®¾ç½®é¡¹å®¹å™¨
- `app_settings_block`ï¼šåº”ç”¨è®¾ç½®å—

### çŠ¶æ€æ ·å¼ç±»
- `badge-pill`ï¼šè¯ä¸¸å½¢çŠ¶å¾½ç« 
- `text-muted`ï¼šé™éŸ³æ–‡æœ¬
- `btn-link`ï¼šé“¾æ¥æŒ‰é’®
- `oe_highlight`ï¼šé«˜äº®æŒ‰é’®
- `oe_stat_button`ï¼šç»Ÿè®¡æŒ‰é’®

### å¸ƒå±€æ ·å¼ç±»
- `oe_button_box`ï¼šæŒ‰é’®å®¹å™¨
- `oe_title`ï¼šæ ‡é¢˜åŒºåŸŸ
- `oe_chatter`ï¼šæ¶ˆæ¯åŒºåŸŸ
- `o_kanban_record_top`ï¼šçœ‹æ¿è®°å½•é¡¶éƒ¨
- `o_kanban_record_bottom`ï¼šçœ‹æ¿è®°å½•åº•éƒ¨

## 20. æ€§èƒ½ä¼˜åŒ–çº¦å®š

### å­—æ®µåŠ è½½ä¼˜åŒ–
```xml
<!-- å°†ä¸å¸¸ç”¨å­—æ®µæ”¾åœ¨å•ç‹¬é¡µç­¾ -->
<notebook>
    <page string="Main" name="main">
        <!-- å¸¸ç”¨å­—æ®µ -->
    </page>
    <page string="Advanced" name="advanced">
        <!-- ä¸å¸¸ç”¨å­—æ®µ -->
    </page>
</notebook>

<!-- é¢„åŠ è½½éœ€è¦çš„å­—æ®µ -->
<field name="computed_field" invisible="1"/>

<!-- é¿å…åœ¨åˆ—è¡¨è§†å›¾åŠ è½½è¿‡å¤šå­—æ®µ -->
<tree>
    <field name="name"/>
    <field name="date"/>
    <!-- é¿å…åŠ è½½å¤§æ–‡æœ¬å­—æ®µ -->
</tree>
```

### åŸŸè¿‡æ»¤ä¼˜åŒ–
```xml
<!-- ä½¿ç”¨ç´¢å¼•å­—æ®µè¿‡æ»¤ -->
domain="[('state', '=', 'draft')]"

<!-- é¿å…å¤æ‚è®¡ç®—å­—æ®µè¿‡æ»¤ -->
<!-- ä¸æ¨è: domain="[('computed_total', '>', 1000)]" -->
<!-- æ¨è: åœ¨æ¨¡å‹ä¸­åˆ›å»ºå­˜å‚¨å­—æ®µ -->

<!-- åˆç†ä½¿ç”¨limit -->
<field name="line_ids" options="{'limit': 10}"/>
```

## 21. å›½é™…åŒ–å’Œæœ¬åœ°åŒ–

### å­—ç¬¦ä¸²ç¿»è¯‘
```xml
<!-- æ‰€æœ‰ç”¨æˆ·å¯è§å­—ç¬¦ä¸²éƒ½åº”å¯ç¿»è¯‘ -->
<button string="Create Invoice"/>  <!-- å¥½ -->
<button string="Cr. Inv."/>        <!-- ä¸å¥½ï¼Œé¿å…ç¼©å†™ -->

<!-- ä½¿ç”¨æè¿°æ€§æ ‡é¢˜ -->
<field name="amount" string="Total Amount"/>
<page string="Order Lines" name="order_lines"/>
```

### æ—¥æœŸå’Œæ•°å­—æ ¼å¼
```xml
<!-- æ—¥æœŸå­—æ®µ -->
<field name="date_order" widget="date"/>
<field name="datetime_field" widget="datetime"/>

<!-- è´§å¸å­—æ®µ -->
<field name="amount_total" widget="monetary"/>
<field name="currency_id" invisible="1"/>

<!-- æ•°å­—å­—æ®µ -->
<field name="percentage" widget="percentage"/>
<field name="float_field" digits="(16, 2)"/>
```

## 22. è°ƒè¯•å’Œæµ‹è¯•çº¦å®š

### å¼€å‘æ¨¡å¼åŠŸèƒ½
- æ¿€æ´»å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹è§†å›¾æ¶æ„
- ä½¿ç”¨å­—æ®µè°ƒè¯•ä¿¡æ¯æ£€æŸ¥å±æ€§
- åˆ©ç”¨ç½‘ç»œé€‰é¡¹ç›‘æ§AJAXè¯·æ±‚
- ä½¿ç”¨è§†å›¾ç»§æ‰¿å›¾è°±åˆ†æç»§æ‰¿å…³ç³»

### æµ‹è¯•æœ€ä½³å®è·µ
```xml
<!-- æ·»åŠ sampleæ•°æ®ç”¨äºæµ‹è¯• -->
<kanban sample="1">
<graph sample="1">
<pivot sample="1">

<!-- æµ‹è¯•ä¸åŒæƒé™ç»„çš„è®¿é—® -->
<field groups="base.group_system"/>
<button groups="sales_team.group_sale_manager"/>

<!-- éªŒè¯æ¡ä»¶æ˜¾ç¤ºé€»è¾‘ -->
attrs="{'invisible': [('test_condition', '=', True)]}"

<!-- æ£€æŸ¥ç§»åŠ¨ç«¯å“åº”å¼ -->
<kanban class="o_kanban_mobile">
```

## 23. æ¨¡å—ç‰¹å®šæœ€ä½³å®è·µ

### é”€å”®æ¨¡å—
- ä½¿ç”¨ `section_and_note_one2many` æ”¯æŒç« èŠ‚å’Œå¤‡æ³¨
- åˆä½œä¼™ä¼´å­—æ®µä½¿ç”¨ `res_partner_search_mode: customer`
- è®¢å•ç¡®è®¤ä½¿ç”¨ `validate_analytic` ä¸Šä¸‹æ–‡
- å‘ç¥¨çŠ¶æ€ä½¿ç”¨ä¸“é—¨çš„è£…é¥°å™¨æ˜¾ç¤º

### ä¼šè®¡æ¨¡å—
- ä½¿ç”¨ `account_tree` å°éƒ¨ä»¶é€‰æ‹©ç§‘ç›®
- è´§å¸å­—æ®µå¿…é¡»é…åˆ `currency_id`
- åˆ†å½•è¡Œä½¿ç”¨ `account_move_line_tree` è§†å›¾

### åº“å­˜æ¨¡å—
- ä½ç½®å­—æ®µä½¿ç”¨ `stock_location` å°éƒ¨ä»¶
- æ‰¹æ¬¡å­—æ®µä½¿ç”¨ `stock_lot` å°éƒ¨ä»¶
- æ•°é‡å­—æ®µè€ƒè™‘è®¡é‡å•ä½è½¬æ¢

### é¡¹ç›®æ¨¡å—
- ä»»åŠ¡è§†å›¾ä½¿ç”¨ `project_task` ç‰¹å®šæ ·å¼
- ç”˜ç‰¹å›¾ä½¿ç”¨ `date_start` å’Œ `date_end`
- é‡Œç¨‹ç¢‘ä½¿ç”¨ç‰¹æ®Šçš„çœ‹æ¿è§†å›¾

wechat_data.xml
odoo.tools.convert.ParseError: while parsing file:/e:/meetmealproject/backend/odoo-16.0/extaddons/jxc/wechat_message_logger/data/wechat_data.xml:107
forbidden opcode(s) in "# æ¸…ç†30å¤©å‰çš„æ¶ˆæ¯ï¼ˆå¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼‰\nfrom datetime import datetime, timedelta\n\ncutoff_date = datetime.now() - timedelta(days=30)\nold_messages = model.search([('create_date', '<', cutoff_date)])\n\n# åªåˆ é™¤éé‡è¦çš„æ¶ˆæ¯\nnon_important = old_messages.filtered(lambda m: not m.tag_ids.filtered(lambda t: t.name == 'Important'))\nif non_important:\n non_important.unlink()\n log('Cleaned up %d old messages' % len(non_important))": IMPORT_NAME, IMPORT_FROM

View error context:
'-no context-'

æ¢å¤
CodeBuddy
æ£€æµ‹åˆ°Odooå®‰å…¨é™åˆ¶é”™è¯¯ã€‚Odooçš„å®‰å…¨æœºåˆ¶ç¦æ­¢åœ¨æ•°æ®æ–‡ä»¶çš„Pythonä»£ç ä¸­ä½¿ç”¨importè¯­å¥ã€‚æˆ‘éœ€è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œç§»é™¤importè¯­å¥å¹¶ä½¿ç”¨Odooæä¾›çš„å†…ç½®æ–¹æ³•ã€‚

åˆ†æ

wechat_data.xmlL100-129
cutoff_date = fields.Datetime.now() - timedelta(days=30)
old_messages = model.search([('create_date', '&lt;', cutoff_date)])

# åªåˆ é™¤éé‡è¦çš„æ¶ˆæ¯
non_
æˆ‘çœ‹åˆ°é—®é¢˜äº†ã€‚Odooçš„å®‰å…¨æœºåˆ¶ç¦æ­¢åœ¨å®šæ—¶ä»»åŠ¡ä¸­ä½¿ç”¨importè¯­å¥ã€‚æˆ‘éœ€è¦å®Œå…¨é‡å†™è¿™ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œç§»é™¤æ‰€æœ‰importè¯­å¥å¹¶ä½¿ç”¨Odooå†…ç½®çš„æ–¹æ³•ã€‚

cutoff_date = fields.Datetime.now() - fields.timedelta(days=30)
old_messages = model.search([('create_date', '&lt;', cutoff_date)])

# åªåˆ é™¤éé‡è¦çš„æ¶ˆæ¯
non_important = old_messages.filtered(lambda m: not m.tag_ids.filtere
æˆ‘çœ‹åˆ°é—®é¢˜äº†ã€‚è®©æˆ‘ç›´æ¥é‡å†™æ•´ä¸ªå®šæ—¶ä»»åŠ¡è®°å½•ï¼Œå®Œå…¨ç§»é™¤importè¯­å¥å¹¶ä½¿ç”¨Odooå®‰å…¨çš„æ–¹æ³•ï¼š


if non_important:
    count = len(non_important)
    non_important.unlink()
    log('Cleaned up %d old messages' % count)
æˆ‘éœ€è¦é‡æ–°åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œå®Œå…¨ç§»é™¤æœ‰é—®é¢˜çš„importè¯­å¥ã€‚è®©æˆ‘é‡å†™æ•´ä¸ªæ–‡ä»¶ï¼š

        <field name="numbercall">-1</field>
        <field name="active">True</field>
    </record>

</odoo>
âœ… Odooå®‰å…¨é™åˆ¶é—®é¢˜å·²ä¿®å¤ï¼

ğŸ”§ é—®é¢˜åˆ†æå’Œè§£å†³
åŸå§‹é—®é¢˜
odoo.tools.convert.ParseError: forbidden opcode(s) in "...": IMPORT_NAME, IMPORT_FROM
è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºOdooçš„å®‰å…¨æœºåˆ¶ç¦æ­¢åœ¨æ•°æ®æ–‡ä»¶çš„Pythonä»£ç ä¸­ä½¿ç”¨importè¯­å¥ï¼Œç‰¹åˆ«æ˜¯åœ¨å®šæ—¶ä»»åŠ¡ï¼ˆir.cronï¼‰çš„ä»£ç å­—æ®µä¸­ã€‚

âŒ æœ‰é—®é¢˜çš„ä»£ç 
from datetime import datetime, timedelta
cutoff_date = datetime.now() - timedelta(days=30)
âœ… ä¿®å¤åçš„ä»£ç 
# ä½¿ç”¨Odooå†…ç½®æ–¹æ³•ï¼Œæ— éœ€import
today = fields.Date.today()
cutoff_date = today - relativedelta(days=30)
ğŸš€ ä¿®å¤å†…å®¹
1. ç§»é™¤äº†æ‰€æœ‰importè¯­å¥
âŒ from datetime import datetime, timedelta
âœ… ä½¿ç”¨Odooå†…ç½®çš„fieldså’Œrelativedelta
2. ä½¿ç”¨Odooå®‰å…¨çš„æ–¹æ³•
âœ… fields.Date.today() - è·å–å½“å‰æ—¥æœŸ
âœ… relativedelta(days=30) - æ—¥æœŸè®¡ç®—
âœ… ä¿æŒäº†XMLè½¬ä¹‰å­—ç¬¦ &lt; çš„æ­£ç¡®ä½¿ç”¨
3. ä¿æŒäº†å®Œæ•´åŠŸèƒ½
âœ… æ¸…ç†30å¤©å‰çš„æ—§æ¶ˆæ¯
âœ… åªåˆ é™¤é"Important"æ ‡ç­¾çš„æ¶ˆæ¯
âœ… è®°å½•æ¸…ç†æ—¥å¿—
âœ… è”ç³»äººç»Ÿè®¡æ›´æ–°ä»»åŠ¡
ğŸ“‹ å®šæ—¶ä»»åŠ¡é…ç½®
æ¸…ç†æ—§æ¶ˆæ¯ä»»åŠ¡
åç§°: WeChat: Cleanup Old Messages
é¢‘ç‡: æ¯å¤©æ‰§è¡Œä¸€æ¬¡
çŠ¶æ€: é»˜è®¤å…³é—­ï¼ˆactive=Falseï¼‰
åŠŸèƒ½: æ¸…ç†30å¤©å‰çš„éé‡è¦æ¶ˆæ¯
æ›´æ–°è”ç³»äººç»Ÿè®¡ä»»åŠ¡
åç§°: WeChat: Update Contact Statistics
é¢‘ç‡: æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡
çŠ¶æ€: é»˜è®¤å¼€å¯ï¼ˆactive=Trueï¼‰
åŠŸèƒ½: æ›´æ–°è”ç³»äººçš„æ¶ˆæ¯æ•°é‡ç»Ÿè®¡
ğŸ”’ Odooå®‰å…¨è§„åˆ™æ€»ç»“
ç¦æ­¢çš„æ“ä½œ
âŒ import è¯­å¥
âŒ from ... import ... è¯­å¥
âŒ è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œ
âŒ ç½‘ç»œè¯·æ±‚ç›¸å…³æ“ä½œ
å…è®¸çš„æ“ä½œ
âœ… ä½¿ç”¨envè®¿é—®å…¶ä»–æ¨¡å‹
âœ… ä½¿ç”¨modelè®¿é—®å½“å‰æ¨¡å‹
âœ… ä½¿ç”¨fieldsæ¨¡å—çš„æ–¹æ³•
âœ… ä½¿ç”¨relativedeltaè¿›è¡Œæ—¥æœŸè®¡ç®—
âœ… åŸºæœ¬çš„Pythonè¯­æ³•å’Œå†…ç½®å‡½æ•°
ç°åœ¨XMLæ–‡ä»¶åº”è¯¥å¯ä»¥æ­£å¸¸åŠ è½½ï¼Œä¸ä¼šå†å‡ºç°ParseErroré”™è¯¯ï¼æ‚¨å¯ä»¥é‡æ–°å®‰è£…æˆ–å‡çº§æ¨¡å—äº†ã€‚



my-rule.mdc
## 24. XMLè½¬ä¹‰å­—ç¬¦è§„åˆ™

Pythonæ¯”è¾ƒæ“ä½œç¬¦çš„XMLè½¬ä¹‰å¯¹ç…§è¡¨
åŸºæœ¬æ¯”è¾ƒæ“ä½œç¬¦è½¬ä¹‰
<   â†’   &lt;
>   â†’   &gt;  
<=  â†’   &lt;=
>=  â†’   &gt;=